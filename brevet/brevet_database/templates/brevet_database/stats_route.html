{% extends "base.html" %}

{% block title %}
    Статистика | {{ route.name }} {{ route.distance }} км | 
{% endblock %}

{% block content %}
    <h2 class="my-5 mx-3">
        {{ route.name }}
    </h2>
    <h4 class="text-muted my-3 mx-3">
        {{ route.distance }} км 
    </h4>
    {% if first_event %}
        <h5 class="text-muted mx-3">
            Первый бревет: 
            <a href = "{{ first_event.get_absolute_url }}">
                {{ first_event.get_date }}
            </a>
        </h5>
        <h5 class="text-muted mx-3">
            Всего бреветов: {{ total_events }} 
        </h5>

        {% if results %}
            <h5 class="my-4 mx-3">
                Результаты: {{ total_results }} 

            </h5>    
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Рандоннёр</th>
                        <th>Дата</th>
                        <th>Время</th>
                        <th>Омологация</th>
                    </tr>
                </thead>
                <tbody>
                    {% for result in results %}
                        <tr>
                            <td>
                                <a href = "{{ result.randonneur.get_absolute_url }}">
                                    {{ result.randonneur }}
                                </a>
                            </td>
                            <td>
                                <a href = "{{ result.event.get_protocol_url }}">
                                    {{ result.get_date }}
                                </a>
                            </td>
                            <td>{{ result.get_time }}</td>   
                            <td>{{ result.homologation }}</td>     
                        </tr>
                    {% endfor %}
                </tbody>
            </table> 
        {% endif %}
    {% else %}
        <h5 class="text-muted mx-3">
            Всего бреветов: {{ total_events }} 
        </h5>
    {% endif %}

{% endblock %}

